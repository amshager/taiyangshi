/* style.css */
:root {
    --bg-ink: #050508;
    --gold-dust: #c5a059;      /* 赤金 */
    --gold-bright: #ffdd88;    /* 亮金 */
    --star-core: #fffbf0;
    --star-halo: rgba(197, 160, 89, 0.4);
    --tech-cyan: #00f3ff;      /* 科技蓝 */
    --void-grey: #444455;      /* 边框色 */
    --font-serif: "Noto Serif SC", "Songti SC", "SimSun", serif;
    --font-num: "Times New Roman", serif;
}

body {
    background-color: var(--bg-ink);
    background-image: radial-gradient(circle at 50% 30%, #1a1a25 0%, var(--bg-ink) 80%);
    color: #e0e0e0;
    font-family: var(--font-serif);
    margin: 0;
    height: 100vh;
    overflow: hidden;
    user-select: none;
    position: relative;
}

/* --- 1. 核心天象 --- */
.cosmos-stage {
    position: absolute;
    top: 35%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 60vmin;
    height: 60vmin;
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 10;
    pointer-events: none;
}

/* 轨道容器 (用于旋转) */
.orbit-outer-container {
    position: absolute; width: 100%; height: 100%;
    animation: rotate-rev 120s linear infinite; /* 外圈容器反转 */
}
.orbit-inner-container {
    position: absolute; width: 70%; height: 70%;
    animation: rotate-slow 60s linear infinite; /* 内圈容器顺转 */
}

/* 轨道线条 (静态背景) */
.orbit-line {
    position: absolute; width: 100%; height: 100%;
    border-radius: 50%;
    box-shadow: 0 0 20px rgba(197, 160, 89, 0.05);
}
.orbit-outer-line { border: 1px dashed rgba(197, 160, 89, 0.3); }
.orbit-inner-line { border: 1px dotted rgba(255, 255, 255, 0.2); }

/* 【新增】轨道粒子 (行星) */
.planet {
    position: absolute;
    top: 0; left: 50%; /* 初始位置在顶点 */
    transform: translate(-50%, -50%); /* 居中 */
    border-radius: 50%;
}
/* 外圈行星 (黄道金星) */
.planet-outer {
    width: 8px; height: 8px;
    background: var(--gold-dust);
    box-shadow: 0 0 10px var(--gold-dust);
}
/* 内圈行星 (赤道白星) */
.planet-inner {
    width: 6px; height: 6px;
    background: #fff;
    box-shadow: 0 0 8px #fff;
    top: 50%; left: 0; /* 内圈的起始点放在左侧，错开 */
}

/* 北极星 */
.polaris-wrapper {
    position: absolute;
    z-index: 100;
    display: flex;
    flex-direction: column;
    align-items: center;
    cursor: pointer;
    pointer-events: auto;
    transition: transform 0.3s;
}
.polaris-wrapper:hover { transform: scale(1.2); }

.the-star {
    position: relative; /* 关键：设为相对定位，让伪元素绝对定位 */
    width: 8px; height: 8px;
    background: var(--star-core);
    border-radius: 50%;
    /* 【修复】闪烁动画回归 */
    animation: twinkle 4s ease-in-out infinite;
    box-shadow: 0 0 15px 4px var(--star-core), 0 0 60px 20px var(--star-halo);
}

/* 【修复】星芒对齐：使用 translate(-50%, -50%) 确保中心点重合 */
.the-star::before { content:''; position:absolute; top:50%; left:50%; width:2px; height:180px; background:linear-gradient(to bottom, transparent, var(--star-core), transparent); transform:translate(-50%, -50%); opacity:0.8; }
.the-star::after { content:''; position:absolute; top:50%; left:50%; width:140px; height:2px; background:linear-gradient(to right, transparent, var(--star-core), transparent); transform:translate(-50%, -50%); opacity:0.8; }

.star-label {
    margin-top: 45px; font-size: 16px; letter-spacing: 8px; color: var(--gold-dust); writing-mode: vertical-rl; font-weight: bold; text-shadow: 0 0 10px rgba(0,0,0,0.8);
}

/* --- 2. 环绕数据翼 --- */
.wing-panel { position: absolute; top: 35%; transform: translateY(-50%); width: 25vw; display: flex; flex-direction: column; gap: 30px; z-index: 20; }
.wing-left { left: 40px; text-align: left; border-right: 1px solid rgba(255,255,255,0.05); padding-right: 20px; }
.wing-right { right: 40px; text-align: right; border-left: 1px solid rgba(255,255,255,0.05); padding-left: 20px; }
.data-group { display: flex; flex-direction: column; gap: 5px; }
.label { font-size: 10px; color: #889; letter-spacing: 2px; text-transform: uppercase; font-family: sans-serif; }
.value { font-size: 20px; color: var(--gold-dust); font-family: var(--font-num); }
.val-cyan { color: var(--tech-cyan); }
.unit { font-size: 12px; color: var(--gold-dim); margin-left: 5px; }

/* GPS 标签与精度 */
.gps-tag { display: inline-block; border: 1px solid var(--tech-cyan); color: var(--tech-cyan); font-size: 10px; padding: 1px 4px; border-radius: 2px; margin-left: 8px; vertical-align: middle; opacity: 0; transition: opacity 0.5s; }
.gps-tag.active { opacity: 1; box-shadow: 0 0 8px rgba(0, 243, 255, 0.3); }
/* 【新增】GPS 精度显示 */
.gps-acc-text { font-size: 10px; color: var(--void-grey); margin-left: 5px; font-family: sans-serif; }

/* --- 3. 底部甲板 --- */
.bottom-deck { position: absolute; bottom: 5vh; left: 50%; transform: translateX(-50%); width: 80%; text-align: center; z-index: 20; }
.main-time { font-size: 64px; color: #fff; font-family: var(--font-num); letter-spacing: 4px; text-shadow: 0 0 30px rgba(255,255,255,0.15); margin-bottom: 30px; }
.solar-term-bar { display: flex; justify-content: space-between; align-items: flex-end; border-top: 1px solid rgba(255,255,255,0.1); padding-top: 15px; }
.term-node { flex: 1; display: flex; flex-direction: column; gap: 5px; }
.term-node.prev, .term-node.next { opacity: 0.6; transform: scale(0.9); }
.term-node.curr { opacity: 1; transform: scale(1.1); padding-bottom: 5px; border-bottom: 2px solid var(--gold-dust); }
.t-name { font-size: 18px; color: var(--gold-dust); font-weight: bold; }
.t-time { font-size: 14px; color: #ccc; font-family: var(--font-num); }
.t-label { font-size: 10px; color: #667; text-transform: uppercase; margin-bottom: 2px; }

/* --- 4. 模态框 --- */
.modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.8); backdrop-filter: blur(10px); z-index: 999; display: flex; justify-content: center; align-items: center; opacity: 0; pointer-events: none; transition: opacity 0.3s; }
.modal-overlay.open { opacity: 1; pointer-events: auto; }
.panel { background: #0a0a10; border: 1px solid var(--gold-dust); padding: 40px; width: 300px; text-align: center; box-shadow: 0 0 50px rgba(0,0,0,1); }
.panel h2 { color: var(--gold-dust); font-size: 18px; margin-bottom: 20px; letter-spacing: 4px; }
.input-row { margin-bottom: 20px; text-align: left; }
.input-row label { display: block; color: #666; font-size: 10px; margin-bottom: 5px; }
.panel input { width: 100%; background: transparent; border: none; border-bottom: 1px solid #444; color: #fff; font-size: 18px; text-align: center; padding: 5px; outline: none; font-family: var(--font-num); }
.btn-row { display: flex; gap: 10px; margin-top: 30px; }
.btn { flex: 1; padding: 10px; background: transparent; cursor: pointer; border: 1px solid var(--gold-dust); color: var(--gold-dust); font-family: var(--font-serif); transition: all 0.2s; }
.btn:hover { background: var(--gold-dust); color: #000; }
.btn-gps { border-color: var(--tech-cyan); color: var(--tech-cyan); }
.btn-gps:hover { background: var(--tech-cyan); color: #000; }
.msg { font-size: 10px; height: 12px; margin-top: 5px; color: #888; }

/* 动画 */
@keyframes rotate-slow { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
@keyframes rotate-rev { from { transform: rotate(360deg); } to { transform: rotate(0deg); } }
/* 【修复】闪烁动画 */
@keyframes twinkle { 0%,100% { opacity: 0.8; transform: scale(1); } 50% { opacity: 1; transform: scale(1.1); box-shadow: 0 0 20px 5px var(--star-core), 0 0 70px 25px var(--star-halo); } }